---
kind: pipeline
name: default

steps:
- name: frontend
  image: node:lts-alpine
  commands:
  - cd complex/frontend
  - npm install
  - npm test
- name: qr-code
  image: microsoft/dotnet:sdk
  commands:
  - cd complex/qr-code
  - dotnet test QrCodeTests
- name: question-list
  image: golang:1.11
  commands:
  - cd complex/question-list
  - go test -mod=vendor
- name: question-submit
  image: haskell:8
  commands:
  - true
  depends_on:
    - frontend
  #- apt-get update
  #- apt-get install -y --no-install-recommends libpq-dev
  #- cd complex/question-submit
  #- cabal new-update
  #- cabal new-install
  #- cabal new-build
- name: deploy
  image: alpine:latest
  depends_on:
    - frontend
    - qr-code
    - question-list
    - question-submit
  commands:
    - true

---
kind: signature
hmac: 4d0b26a08ef5c68b25c6875e5fe3d7177e21259d7c7ca8f7c3fd07c4cdcd3a78

...
